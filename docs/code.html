

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Code Documentation &#8212; Huff &amp; Puff &amp; Classify  documentation</title>
    <link rel="stylesheet" href="_static/dotted.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Demo" href="demo.html" />
    <link rel="prev" title="Software Components" href="software_components.html" /> 
  </head><body>
        <div class="header">
          <div class="header-top">
            <h1 class="heading"><a href="index.html">
              <span>Huff &amp; Puff &amp; Classify  documentation</span></a></h1>
            <h2 class="heading"><span>Code Documentation</span></a></h2>
          </div>
          <div class="topnav">
            
        <p>
        &#171;&#160;&#160;<a href="software_components.html">Software Components</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="demo.html">Demo</a>&#160;&#160;&#187;
        </p>

            <div class="globaltoc">
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="project.html">Project Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="software_components.html">Software Components</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Code Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-prep_data">Clean and train data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-prep_cv">Prepare dataset for cross-validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-most_similar_material">Natural Language Processing: spelling and semantics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-model">Modeling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="demo.html">Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">Environment and Data Acquisition</a></li>
</ul>

            </div>
          </div>
        </div>
        <div class="wrapper">

          <div class="document">
            <div class="documentwrapper">
              <div class="bodywrapper">
                <div class="body">
                  
  <div class="section" id="code-documentation">
<h1>Code Documentation<a class="headerlink" href="#code-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-prep_data">
<span id="clean-and-train-data"></span><h2>Clean and train data<a class="headerlink" href="#module-prep_data" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="prep_data.clean_text">
<code class="descclassname">prep_data.</code><code class="descname">clean_text</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prep_data.html#clean_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prep_data.clean_text" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used to clean a selection of text.
It uses several regular expressions and built in text commands in order to remove commonly seen
errors,
nonsense values,
punctuation,
digits, and
extra whitespace.
TODO: Add functionality to impute a selected value for NaN or missing values?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>text</strong> – This is a text value that needs to be cleaned.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">text: This function returns a cleaned version of the input text.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="prep_data.cleaning_block">
<code class="descclassname">prep_data.</code><code class="descname">cleaning_block</code><span class="sig-paren">(</span><em>df</em>, <em>word</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prep_data.html#cleaning_block"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prep_data.cleaning_block" title="Permalink to this definition">¶</a></dt>
<dd><p>This helper function filters out special characters within number columns, and convert numbers from str to int.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is a dataframe that is read in and manipulated to clean out special characters ‘.’ and ‘?’ within
the number columns and covert the data type of the numbers from string to integer</li>
<li><strong>word</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="prep_data.extract_features">
<code class="descclassname">prep_data.</code><code class="descname">extract_features</code><span class="sig-paren">(</span><em>df</em>, <em>LABEL</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prep_data.html#extract_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prep_data.extract_features" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a helper function that produces a list of features used for model training.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is a dataframe read in for feature extraction.</li>
<li><strong>LABEL</strong> – This is the label specified under prediction.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">features : This is a list of features with label(answers) columns dropped.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="prep_data.extract_ranking">
<code class="descclassname">prep_data.</code><code class="descname">extract_ranking</code><span class="sig-paren">(</span><em>df</em>, <em>vars_to_clean</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prep_data.html#extract_ranking"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prep_data.extract_ranking" title="Permalink to this definition">¶</a></dt>
<dd><p>This helper function is used to extract the ordinal rankings from numerical coding.
TODO: ?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is a pandas df that has columns with garbage values to be removed.</li>
<li><strong>vars_to_clean</strong> – This is a list of strings that indicate which columns you want to extract ranks from.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">df_out: This function returns a pandas df with new vars added with the ordinal rank cols defined.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="prep_data.load_data">
<code class="descclassname">prep_data.</code><code class="descname">load_data</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prep_data.html#load_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prep_data.load_data" title="Permalink to this definition">¶</a></dt>
<dd><p>This helper function is used to load a dataset from a selected csv file.
It monitors the runtime of the loading process and also truncates the dataset
to six specified columns as the training attributes. values with 0 within the numbers
of roof, wall, floor are filtered out as well as rows containing nan.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_name</strong> – This is the file name of the csv file to load in for processing</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">df: This function returns a dataframe with specified columns and no missing data</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="prep_data.ranking">
<code class="descclassname">prep_data.</code><code class="descname">ranking</code><span class="sig-paren">(</span><em>df</em>, <em>vals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prep_data.html#ranking"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prep_data.ranking" title="Permalink to this definition">¶</a></dt>
<dd><p>This helper function ranks the _num columns by the digit in tens, excluding the numbers smaller than 10
or greater than 35, which are considered as invalid or missing values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is a dataframe read to be ranked.</li>
<li><strong>vals</strong> – This is a list of category names (eg. roof, wall, floor) that is specified to be ranked.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">df: This function returns a pandas df with the ordinal rank cols added to the read in datafame.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="prep_data.read_then_clean">
<code class="descclassname">prep_data.</code><code class="descname">read_then_clean</code><span class="sig-paren">(</span><em>file_path</em>, <em>vars_to_clean</em>, <em>filter_series=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prep_data.html#read_then_clean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prep_data.read_then_clean" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the master function for this module. It uses the previously defined helper functions,
in order to output a clean dataset for user. It reads in a selected .csv file from a given filepath,
and applies the previously defined cleaning functions to a list of variables provided by user.</p>
<p>It can also optionally filter the df based on the survey series or TODO language.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file_path</strong> – This is a string indicating which file that you want to read in.</li>
<li><strong>vars_to_clean</strong> – This is a list of strings that indicate which columns you want to clean.</li>
<li><strong>filter_series</strong> – This is a list of strings that indicate which survey series to keep.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">df_clean: This is a pandas df that has columns of text values that have been cleaned using the helper
function.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="prep_data.remove_garbage_codes">
<code class="descclassname">prep_data.</code><code class="descname">remove_garbage_codes</code><span class="sig-paren">(</span><em>df</em>, <em>vars_to_clean</em>, <em>garbage_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prep_data.html#remove_garbage_codes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prep_data.remove_garbage_codes" title="Permalink to this definition">¶</a></dt>
<dd><p>This helper function is used to remove garbage values from a pandas df, replacing them with NaN.
TODO: ?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is a pandas df that has columns with garbage values to be removed.</li>
<li><strong>vars_to_clean</strong> – This is a list of strings that indicate which columns you want to clean.</li>
<li><strong>garbage_list</strong> – This is a list of strings that indicate which garbage values to replace with NaN</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">df_clean: This function returns a pandas df where the garbage codes have been replaced with NaN.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="prep_data.shuffle_redistribute">
<code class="descclassname">prep_data.</code><code class="descname">shuffle_redistribute</code><span class="sig-paren">(</span><em>df</em>, <em>LABEL</em>, <em>Redistribute=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prep_data.html#shuffle_redistribute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prep_data.shuffle_redistribute" title="Permalink to this definition">¶</a></dt>
<dd><p>This helper function generalizes the distribution of the data set with respect to the three ranks (1,2,3),
then it shuffles the data set to unbiased.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is a dtaframe read in to shuffle and redistribute</li>
<li><strong>LABEL</strong> – This is the label specified under prediction</li>
<li><strong>Redistribute</strong> – set True for data redistribution (default True)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">df (pandas df): Returns the modified dataframe
rank_dist: This is a list of the number of data within each rank(1,2,3)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="prep_data.train_test_split">
<code class="descclassname">prep_data.</code><code class="descname">train_test_split</code><span class="sig-paren">(</span><em>df</em>, <em>features</em>, <em>LABEL</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prep_data.html#train_test_split"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prep_data.train_test_split" title="Permalink to this definition">¶</a></dt>
<dd><p>This function splits the dataframe to random testing and training set with 75% and 25%each.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is the dataframe to be split</li>
<li><strong>features</strong> – This is the list of specified features</li>
<li><strong>LABEL</strong> – This is the label specified under prediction</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">x_train: This is the returned train dataset
x_test: This is the returned test dataset
y_train: This is the returned training label
y_test: This is the returned testing label</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-prep_cv">
<span id="prepare-dataset-for-cross-validation"></span><h2>Prepare dataset for cross-validation<a class="headerlink" href="#module-prep_cv" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="prep_cv.cv_censor_col">
<code class="descclassname">prep_cv.</code><code class="descname">cv_censor_col</code><span class="sig-paren">(</span><em>df</em>, <em>colname</em>, <em>pct=0.2</em>, <em>weight_var=None</em>, <em>reps=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prep_cv.html#cv_censor_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prep_cv.cv_censor_col" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used to create pandas dfs where a specified % of the values in a column have been censored
and replaced with NaN, so that they can be predicted in a cross-validation methodology. It returns a list of such
dfs that is the length of the reps argument.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is a pandas df that has columns with garbage values to be removed.</li>
<li><strong>colname</strong> – This is a string indicating the name of a column that you want to censor and later predict.</li>
<li><strong>pct</strong> – This is a value between 0-1 that indicates the fraction of values you want to censor. Default = 20%</li>
<li><strong>weight_var</strong> – This is a string indicating the column name is used to weighted the sample. Default = No weight.</li>
<li><strong>reps</strong> – This is an integer indicating the number of different training datasets to create. Default = 5x</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">df_clean: This function returns a pandas df where the garbage codes have been replaced with NaN.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-most_similar_material">
<span id="natural-language-processing-spelling-and-semantics"></span><h2>Natural Language Processing: spelling and semantics<a class="headerlink" href="#module-most_similar_material" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="most_similar_material.most_similar_material">
<code class="descclassname">most_similar_material.</code><code class="descname">most_similar_material</code><span class="sig-paren">(</span><em>input_word</em>, <em>vocabulary</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/most_similar_material.html#most_similar_material"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#most_similar_material.most_similar_material" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes an “unknown”  word (i.e. a word outside our “dictionnary”)
as input and look for the most similar word within a list of words (our “dictionnary”).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>input_word</strong> – This is a string whose meaning is ambiguous and therefore needs to be matched with a word
within our dictionnary.</li>
<li><strong>vocabulary</strong> – This is a list of the words included in our vocabulary, i.e we know their rank</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">most_similar_word: This function returns the most similar word within our list of words.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-semantic"></span><dl class="function">
<dt id="semantic.check_if_english">
<code class="descclassname">semantic.</code><code class="descname">check_if_english</code><span class="sig-paren">(</span><em>df</em>, <em>base_var</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/semantic.html#check_if_english"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#semantic.check_if_english" title="Permalink to this definition">¶</a></dt>
<dd><p>This function goes through a dataframe and verifies if, within the column of interest, all materials correspond to
actual english words. As we match materials on their semantic similarity, we want to ensure that we drop typos and foreign words.
This function can be used to subset a dataframe, and only keep observations in english.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is a cleaned dataframe containing all the information from the surveys.</li>
<li><strong>base_var</strong> – The variable of interest for which some materials are unknown.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return english_material:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first last">it returns a list of boolean indicating for each row, whether the material in base_var is described
using a word in english.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="semantic.filter_one_word_materials">
<code class="descclassname">semantic.</code><code class="descname">filter_one_word_materials</code><span class="sig-paren">(</span><em>df</em>, <em>base_var</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/semantic.html#filter_one_word_materials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#semantic.filter_one_word_materials" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes an input dataframe and returns a subset of it, where all materials described with more than one word
have been filtered out. As we match materials on their semantic similarity, we want to ensure that we only have materials described
with one word. Using our semantic similarity function on short text is ambiguous and needs to be further investigated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>df</strong> – This is a cleaned dataframe containing all the information from the surveys.</li>
<li><strong>base_var</strong> – <p>The variable of interest for which some materials are unknown.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">return subset:</th><td class="field-body">it returns a dataframe containing the subset of rows for which base_var was described with one word.</td>
</tr>
</tbody>
</table>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="semantic.semantic_similarity_scan">
<code class="descclassname">semantic.</code><code class="descname">semantic_similarity_scan</code><span class="sig-paren">(</span><em>unknown_list</em>, <em>corpus_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/semantic.html#semantic_similarity_scan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#semantic.semantic_similarity_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes a list of materials for which the rank is unknown (i.e. a word outside our “dictionnary”)
as input and calculates a score of semantic similarity with each word of the list of known material (our “dictionnary”).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – unknown_list: This is a list of strings whose rank is unknown</li>
<li><strong>corpus_list</strong> – This is a list of the strings for which the rank is known. The strings are classified
within one of three categories of materials.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return distrib:</th><td class="field-body"><p class="first last">The distribution of the similarity scores between each unknown material in the unknown list and known material
in the corpus_list.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-semantic_similarity_scan"></span><dl class="function">
<dt id="semantic_similarity_scan.semantic_similarity_scan">
<code class="descclassname">semantic_similarity_scan.</code><code class="descname">semantic_similarity_scan</code><span class="sig-paren">(</span><em>unknown_list</em>, <em>corpus_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/semantic_similarity_scan.html#semantic_similarity_scan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#semantic_similarity_scan.semantic_similarity_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes a list of materials for which the rank is unknown (i.e. a word outside our “dictionnary”)
as input and calculates a score of semantic similarity with each word of the list of known material (our “dictionnary”).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>unknown_list</strong> – This is a list of strings whose rank is unknown</li>
<li><strong>corpus_list</strong> – This is a list of the strings for which the rank is known. The strings are classified
within one of three categories of materials.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">distrib (DataFrame): The distribution of the similarity scores between each unknown material in the unknown list and known material
in the corpus_list.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-model">
<span id="modeling"></span><h2>Modeling<a class="headerlink" href="#module-model" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-fuzzy"></span><dl class="function">
<dt id="fuzzy.build_corpus">
<code class="descclassname">fuzzy.</code><code class="descname">build_corpus</code><span class="sig-paren">(</span><em>df</em>, <em>str_var</em>, <em>rank_var</em>, <em>rank_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fuzzy.html#build_corpus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fuzzy.build_corpus" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a helper function for this module. It is used to build the corpuses that will be used to analyze
word similarity in order to make a prediction for unknown words. It returns a separate corpus for each provided
rank and also a vector of unknown words which currently are not associated with a rank and need to be predicted.</p>
<p>TODO: ?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is a pandas df that has words which are associated with a rank and unknown words.</li>
<li><strong>str_var</strong> – This is a string indicating the variable you want to analyze the string values of.</li>
<li><strong>rank_var</strong> – This is a string indicating the variable you want to classify the string_var into ranks by.</li>
<li><strong>rank_list</strong> – This is a list of the rank categories you want to classify by. rank_var should contain these vals.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">out: This is a list which length=length(rank_list). Each object in the list is a vector of words (corpus)
that are associated with this rank.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">other: This is a vector of unknown words that we will compare against every corpus in out to classify.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="fuzzy.fuzzy_density">
<code class="descclassname">fuzzy.</code><code class="descname">fuzzy_density</code><span class="sig-paren">(</span><em>df</em>, <em>facet</em>, <em>var_list</em>, <em>color_list</em>, <em>variant=''</em>, <em>cutoff=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fuzzy.html#fuzzy_density"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fuzzy.fuzzy_density" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a helper function for this module. It is used to generate density plots showing distributions of scores
for each word, with the colors indicating each different quality ranking. A cutoff argument can be passed to draw a
vertical line on the plot to indicate which probability mass is going to be used to derive the predictions.</p>
<p>TODO: ?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is the input pandas df of score distributions by quality ranking for each unknown word</li>
<li><strong>facet</strong> – This is a str specifying the column name that we want to facet on for our plots.</li>
<li><strong>var_list</strong> – This is a list of str column names, each containing the distribution of values for a given rank.</li>
<li><strong>color_list</strong> – This is a dictionary of color values, defined by the column name for each quality rank.</li>
<li><strong>cutoff</strong> – This is the similarity score cutoff we think implies sufficient semantic meaning in word similarity.</li>
<li><strong>variant</strong> – This is an optional parameter that can be used if we transform the score column before plotting.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">g: This is an object containing the generated plots.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="fuzzy.fuzzy_predict">
<code class="descclassname">fuzzy.</code><code class="descname">fuzzy_predict</code><span class="sig-paren">(</span><em>df</em>, <em>var_list</em>, <em>grouping</em>, <em>cutoff</em>, <em>dictionary</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fuzzy.html#fuzzy_predict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fuzzy.fuzzy_predict" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a helper function for this module. It is used to predict the most likely ranking level for a given string
based on the distribution of its similarity scores against each corpus from each ranking level. The cutoff level is
used to determine which rank to predict, as the prediction will be based on which ranking level has the highest
probability (number of instances &gt; cutoff / total number) of being above the cutoff.</p>
<p>TODO: ?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – This is the input pandas df of words we wanted to predict for using the words that are known per rank.</li>
<li><strong>var_list</strong> – This is a list of str column names, each containing the distribution of values for a given rank.</li>
<li><strong>grouping</strong> – This is a str value that specifies the column name that each distribtuion is grouped by.</li>
<li><strong>cutoff</strong> – This is the similarity score cutoff we think implies sufficient semantic meaning in word similarity.</li>
<li><strong>dictionary</strong> – This is a dictionary we can use to transform the column names back into an ordinal rank values.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">out: This is a pandas df which is a copy of the input df, but has a new column added of predicted rank.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="fuzzy.fuzzy_scan">
<code class="descclassname">fuzzy.</code><code class="descname">fuzzy_scan</code><span class="sig-paren">(</span><em>unknown_list</em>, <em>corpus_list</em>, <em>jupyter=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fuzzy.html#fuzzy_scan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fuzzy.fuzzy_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a helper function for this module. It is used to scan each word on the list of unknown words by
comparing it to every word in each corpus in corpus_list. The words are compared using the fuzzywuzzy package and a
similarity score is computed using the Levenshtein distance. For each unknown word, a distribution of similiarity
scores is provided for every known rank. This distribution is later used to predict the most likely rank for the
given word.</p>
<p>TODO: ?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>unknown_list</strong> – This is a vector of words with an unknown quality ranking that we want to analyze and predict.</li>
<li><strong>corpus_list</strong> – This is a list of vectors that contain all the words associated with each quality ranking level.</li>
<li><strong>jupyter</strong> – This is a boolean that tells us if we are running in a jupyter nb. If so, we use a different tqdm
progress bar.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">distrib: This is a pandas df with all the similarity scores for each unknown word.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-rfc_build"></span><p>Created on Thu Dec  6 21:26:13 2018</p>
<p>&#64;author: kevinhsu</p>
<dl class="function">
<dt id="rfc_build.confusion_matrix">
<code class="descclassname">rfc_build.</code><code class="descname">confusion_matrix</code><span class="sig-paren">(</span><em>y</em>, <em>pred</em>, <em>plot=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rfc_build.html#confusion_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rfc_build.confusion_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>This function generates the confusion matrix of the prediction, Enable plot to generate the figure</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>y</strong> – This is the actual rank of the data</li>
<li><strong>pred</strong> – This is the predicted rank of the data</li>
<li><strong>plot</strong> – Set to True to generate the plot (default False)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">conf_matrix: Returns the crosstable of the confusion matrix</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="rfc_build.demo_rfc">
<code class="descclassname">rfc_build.</code><code class="descname">demo_rfc</code><span class="sig-paren">(</span><em>DATA_DIR</em>, <em>FEATURES</em>, <em>RFC</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rfc_build.html#demo_rfc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rfc_build.demo_rfc" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the demo function for rfc</p>
<dl class="docutils">
<dt>Args: </dt>
<dd>DATA_DIR: data directory path
FEATURES: feature of the model
RFC: loaded rfc model</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="rfc_build.load_model">
<code class="descclassname">rfc_build.</code><code class="descname">load_model</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rfc_build.html#load_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rfc_build.load_model" title="Permalink to this definition">¶</a></dt>
<dd><p>This function loads the saved model in the current directory</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> – specified .sav model file</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">loaded_model: Return the RFC model to the module</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="rfc_build.rfc_model">
<code class="descclassname">rfc_build.</code><code class="descname">rfc_model</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rfc_build.html#rfc_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rfc_build.rfc_model" title="Permalink to this definition">¶</a></dt>
<dd><p>This function builds a random forest model and saves the model as .sav in the current directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – Feature vector</li>
<li><strong>y</strong> – Label</li>
<li><strong>label</strong> – This is the label specifed under prediction</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">RFC: Return the built model</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


                </div>
              </div>

            </div>

            <div class="clearer"></div>
          </div>
        </div>

        <div class="bottomnav">
          
        <p>
        &#171;&#160;&#160;<a href="software_components.html">Software Components</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="demo.html">Demo</a>&#160;&#160;&#187;
        </p>

        </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Adrien Allorant, Ruofan Cai, Joseph Frostad, Kevin Hsu, Tianyi Li.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.2.
    </div>
  </body>
</html>